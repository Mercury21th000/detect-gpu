// !! AUTO-GENERATED FILE - DO NOT EDIT !!
// Scraped from https://www.notebookcheck.net/
// Mobile GPU benchmark: https://www.notebookcheck.net/Mobile-Graphics-Cards-Benchmark-List.844.0.html?type=&sort=&professional=2&showClassDescription=1&deskornote=3&archive=1&perfrating=1&or=0&showBars=1&3dmark13_ice_gpu=1&3dmark13_cloud_gpu=1&3dmark13_fire_gpu=1&3dmark11_gpu=1&gpu_fullname=1&architecture=1&pixelshaders=1&vertexshaders=1&corespeed=1&boostspeed=1&memoryspeed=1&memorybus=1&memorytype=1&directx=1
// Desktop GPU benchmark: https://www.notebookcheck.net/Mobile-Graphics-Cards-Benchmark-List.844.0.html?type=&sort=&showClassDescription=1&deskornote=4&archive=1&perfrating=1&or=0&showBars=1&3dmark13_ice_gpu=1&3dmark13_cloud_gpu=1&3dmark13_fire_gpu=1&3dmark11_gpu=1&gpu_fullname=1&architecture=1&pixelshaders=1&vertexshaders=1&corespeed=1&boostspeed=1&memoryspeed=1&memorybus=1&memorytype=1&directx=1
const GPU_BENCHMARK_SCORE_DESKTOP = [
    '772 - AMD Radeon HD 7290',
    '762 - AMD Radeon HD 8180',
    '760 - AMD Radeon HD 7310',
    '758 - AMD Radeon HD 7340',
    '754 - Intel HD Graphics (Bay Trail)',
    '712 - Intel HD Graphics (Ivy Bridge)',
    '708 - AMD Radeon HD 8210',
    '684 - Intel HD Graphics (Cherry Trail)',
    '683 - AMD Radeon HD 8250',
    '682 - AMD Radeon R6 (Mullins)',
    '681 - AMD Radeon HD 8240',
    '673 - AMD Radeon HD 8280',
    '670 - AMD Radeon R2 (Mullins/Beema/Carrizo-L)',
    '648 - Intel HD Graphics (Haswell)',
    '639 - Intel HD Graphics 400 (Braswell)',
    '638 - Intel HD Graphics (Braswell)',
    '637 - Intel HD Graphics 405 (Braswell)',
    '617 - Intel HD Graphics 500',
    '616 - Intel UHD Graphics 600',
    '615 - AMD Radeon HD 8330',
    '614 - AMD Radeon HD 8350G',
    '601 - AMD Radeon HD 8400',
    '597 - AMD Radeon HD 8450G',
    '588 - Intel HD Graphics 4200',
    '587 - Intel HD Graphics (Broadwell)',
    '586 - AMD Radeon R2 (Stoney Ridge)',
    '585 - AMD Radeon R3 (Mullins/Beema)',
    '584 - AMD Radeon R4 (Kaveri)',
    '583 - AMD Radeon R4 (Beema)',
    '582 - AMD Radeon R5 (Beema/Carrizo-L)',
    '580 - AMD Radeon R4 (Stoney Ridge)',
    '576 - Intel HD Graphics 4000',
    '575 - AMD Radeon HD 7480D',
    '567 - Intel HD Graphics 5300',
    '566 - Intel HD Graphics 505',
    '565 - Intel UHD Graphics 605',
    '536 - Intel HD Graphics 510',
    '535 - AMD Radeon HD 8610G',
    '534 - Intel HD Graphics 610',
    '533 - Intel HD Graphics 4400',
    '532 - Intel HD Graphics 515',
    '525 - AMD Radeon HD 8470D',
    '516 - AMD Radeon HD 8550G',
    '500 - Intel HD Graphics 5000',
    '497 - AMD Radeon HD 7660G',
    '496 - NVIDIA GeForce 710M',
    '493 - AMD Radeon R5 (Kaveri)',
    '492 - AMD Radeon R5 (Carrizo)',
    '491 - Intel HD Graphics 615',
    '490 - Intel UHD Graphics 615',
    '489 - Intel UHD Graphics 617',
    '481 - Qualcomm Adreno 630',
    '479 - Intel HD Graphics 5500',
    '477 - Intel HD Graphics 4600',
    '473 - Intel Iris Graphics 5100',
    '471 - NVIDIA Quadro K610M',
    '470 - Intel HD Graphics 6000',
    '464 - AMD Radeon R5 (Stoney Ridge)',
    '463 - AMD Radeon R5 M420',
    '462 - AMD Radeon R5 M315',
    '460 - AMD Radeon R5 M320',
    '457 - NVIDIA GeForce GT 720M',
    '456 - Intel Iris Graphics 6100',
    '455 - Intel HD Graphics 520',
    '454 - NVIDIA GeForce 820M',
    '453 - NVIDIA GeForce 910M',
    '451 - AMD Radeon RX Vega 3',
    '450 - AMD Radeon R5 M255',
    '449 - AMD Radeon R5 M430',
    '448 - AMD Radeon R5 M330',
    '445 - AMD Radeon HD 7560D',
    '439 - AMD Radeon HD 8650G',
    '423 - NVIDIA Quadro K1000M',
    '421 - AMD Radeon HD 7660D',
    '420 - AMD Radeon R6 M255DX',
    '413 - Intel HD Graphics 5600',
    '403 - AMD FirePro W2100',
    '394 - AMD Radeon R6 (Kaveri)',
    '382 - Qualcomm Adreno 680',
    '381 - AMD Radeon R6 (Carrizo)',
    '380 - Intel HD Graphics 620',
    '379 - Intel UHD Graphics 620',
    '378 - AMD Radeon R5 (Bristol Ridge)',
    '376 - Intel HD Graphics P530',
    '375 - Intel HD Graphics 530',
    '374 - Intel HD Graphics P630',
    '373 - Intel HD Graphics 630',
    '372 - Intel UHD Graphics P630',
    '371 - Intel UHD Graphics 630',
    '370 - Intel UHD Graphics G1 (Ice Lake 32 EU)',
    '369 - AMD Radeon RX Vega 6',
    '367 - AMD Radeon 520',
    '366 - AMD Radeon R7 M340',
    '359 - AMD Radeon R7 M440',
    '358 - AMD Radeon R8 M445DX',
    '355 - NVIDIA GeForce 920M',
    '353 - AMD Radeon R7 M360',
    '350 - AMD Radeon R7 M460',
    '348 - AMD Radeon R7 (Kaveri)',
    '347 - AMD Radeon R7 (Carrizo)',
    '346 - NVIDIA GeForce GT 640M',
    '345 - AMD Radeon R7 (Bristol Ridge)',
    '341 - AMD Radeon R7 M265',
    '337 - AMD FirePro M4100',
    '334 - NVIDIA GeForce GT 730M',
    '324 - AMD FirePro M4000',
    '322 - NVIDIA GeForce 825M',
    '320 - NVIDIA GeForce GT 735M',
    '317 - NVIDIA Quadro K2000M',
    '313 - Intel Iris Graphics 540',
    '312 - NVIDIA GeForce 920MX',
    '311 - Intel Iris Plus Graphics 640',
    '310 - NVIDIA GeForce MX110',
    '309 - NVIDIA GeForce 830M',
    '308 - Intel Iris Plus Graphics 645',
    '307 - AMD Radeon 530',
    '306 - Intel Iris Graphics 550',
    '305 - NVIDIA GeForce 930M',
    '304 - Intel Iris Plus Graphics 650',
    '303 - NVIDIA GeForce GT 740M',
    '302 - AMD Radeon R7 384 Cores (Kaveri Desktop)',
    '301 - Intel Iris Pro Graphics 5200',
    '300 - AMD Radeon R7 512 Cores (Kaveri Desktop)',
    '297 - NVIDIA GeForce GT 745M',
    '295 - NVIDIA GeForce 840M',
    '294 - NVIDIA Quadro M500M',
    '289 - AMD Radeon R7 M445',
    '288 - Intel Iris Plus Graphics 655',
    '287 - AMD Radeon R9 M375',
    '286 - AMD FirePro W4190M',
    '285 - NVIDIA Quadro M600M',
    '283 - NVIDIA GeForce 930MX',
    '282 - Intel Iris Plus Graphics G4 (Ice Lake 48 EU)',
    '281 - NVIDIA GeForce 940M',
    '280 - AMD Radeon RX Vega 8',
    '279 - NVIDIA Quadro K1100M',
    '278 - NVIDIA Quadro M520',
    '277 - NVIDIA GeForce 940MX',
    '276 - NVIDIA GeForce MX130',
    '275 - Intel Iris Pro Graphics 6200',
    '274 - NVIDIA GeForce GT 750M',
    '269 - AMD FirePro W4100',
    '268 - AMD FirePro W4170M',
    '266 - AMD Radeon R7 M465',
    '264 - AMD Radeon R9 M265X',
    '261 - NVIDIA GeForce 845M',
    '259 - NVIDIA GeForce GT 755M',
    '258 - AMD Radeon R7 250',
    '253 - NVIDIA Quadro K2100M',
    '252 - NVIDIA GeForce MX230',
    '251 - AMD FirePro M5100',
    '250 - AMD FirePro M6000',
    '248 - NVIDIA Quadro K3000M',
    '242 - AMD FirePro W5130M',
    '241 - NVIDIA Maxwell GPU Surface Book (940M, GDDR5)',
    '235 - AMD Radeon R9 M370X',
    '234 - AMD FirePro W5170M',
    '233 - NVIDIA Quadro K3100M',
    '222 - AMD Radeon R9 M470',
    '217 - Intel Iris Pro Graphics 580',
    '216 - Intel Iris Pro Graphics P580',
    '215 - AMD Radeon RX Vega 10',
    '214 - Intel Iris Plus Graphics G7 (Ice Lake 64 EU)',
    '213 - NVIDIA Quadro P500',
    '212 - NVIDIA Quadro K4000M',
    '207 - NVIDIA GeForce 945M',
    '201 - AMD Radeon RX Vega 11',
    '200 - NVIDIA Quadro M620',
    '199 - NVIDIA Quadro M1000M',
    '198 - NVIDIA GeForce GTX 850M',
    '197 - NVIDIA Quadro P520',
    '196 - AMD Radeon R9 M385X',
    '195 - AMD Radeon R9 M470X',
    '194 - AMD Radeon Pro 450',
    '193 - NVIDIA GeForce GTX 950M',
    '185 - NVIDIA GeForce GTX 860M',
    '184 - AMD Radeon Pro WX 3100 Mobile',
    '183 - AMD Radeon RX 540',
    '182 - AMD Radeon RX 540X',
    '180 - NVIDIA Quadro K4100M',
    '179 - NVIDIA Quadro K5000M',
    '178 - NVIDIA Quadro M2000M',
    '177 - NVIDIA GeForce MX150',
    '176 - NVIDIA GeForce MX250',
    '175 - NVIDIA Quadro P600',
    '174 - NVIDIA GeForce GT 1030 (Desktop)',
    '173 - AMD Radeon Pro 455',
    '172 - AMD Radeon Pro 555',
    '171 - AMD Radeon Pro 555X',
    '170 - AMD Radeon RX 550 (Laptop)',
    '169 - AMD Radeon RX 550X (Laptop)',
    '168 - NVIDIA Quadro P620',
    '167 - NVIDIA Quadro M1200',
    '162 - NVIDIA GeForce GTX 960M',
    '161 - AMD Radeon Pro WX 4130',
    '160 - AMD Radeon Pro 460',
    '159 - AMD Radeon Pro 560',
    '158 - AMD Radeon Pro 560X',
    '156 - AMD FirePro M6100',
    '155 - AMD Radeon R9 M390',
    '152 - AMD Radeon RX 460 (Laptop)',
    '145 - NVIDIA GeForce GTX 870M',
    '144 - NVIDIA Quadro M2200',
    '143 - AMD Radeon RX 560 (Laptop)',
    '142 - AMD Radeon RX 560X (Laptop)',
    '141 - NVIDIA GeForce GTX 965M',
    '139 - AMD Radeon Pro WX 4150',
    '138 - AMD Radeon RX 460 (Desktop)',
    '136 - NVIDIA Quadro P1000',
    '135 - NVIDIA Quadro K5100M',
    '131 - AMD Radeon R9 270X',
    '130 - NVIDIA GeForce GTX 950',
    '129 - NVIDIA GeForce GTX 1050 Max-Q',
    '128 - NVIDIA GeForce GTX 880M',
    '126 - AMD Radeon R7 370',
    '125 - AMD Radeon R9 M395',
    '124 - AMD FirePro W7170M',
    '123 - NVIDIA GeForce GTX 1050 (Laptop)',
    '122 - NVIDIA GeForce GTX 1050 (Desktop)',
    '121 - NVIDIA Quadro M3000M',
    '118 - AMD Radeon R9 M485X',
    '117 - AMD Radeon Pro Vega 16',
    '116 - AMD Radeon Pro WX Vega M GL',
    '115 - AMD Radeon RX Vega M GL / 870',
    '114 - NVIDIA GeForce GTX 1050 Ti Max-Q',
    '113 - AMD Radeon R9 M395X',
    '108 - NVIDIA GeForce GTX 970M',
    '107 - NVIDIA Quadro M4000M',
    '106 - NVIDIA Quadro P2000 Max-Q',
    '105 - NVIDIA Quadro P2000',
    '104 - NVIDIA GeForce GTX 1050 Ti (Desktop)',
    '103 - NVIDIA GeForce GTX 1050 Ti (Laptop)',
    '102 - NVIDIA GeForce GTX 960',
    '101 - AMD Radeon R9 380',
    '100 - AMD Radeon R9 280X',
    '99 - NVIDIA Quadro M5000M',
    '98 - AMD Radeon Pro Vega 20',
    '97 - AMD Radeon RX Vega M GH',
    '96 - NVIDIA GeForce GTX 980M',
    '89 - AMD Radeon R9 290X',
    '86 - NVIDIA Quadro T1000 Max-Q',
    '85 - NVIDIA Quadro T1000 (Laptop)',
    '84 - NVIDIA GeForce GTX 1650 Max-Q',
    '83 - AMD Radeon RX 470 (Laptop)',
    '82 - AMD Radeon RX 570 (Laptop)',
    '81 - AMD Radeon RX 570X (Laptop)',
    '80 - AMD Radeon RX 470 (Desktop)',
    '79 - AMD Radeon Pro WX 7100',
    '77 - NVIDIA Quadro P3000 Max-Q',
    '76 - NVIDIA GeForce GTX 1060 Max-Q',
    '75 - NVIDIA GeForce GTX 1650 (Laptop)',
    '74 - NVIDIA GeForce GTX 1650 (Desktop)',
    '73 - NVIDIA GeForce GTX 970',
    '72 - NVIDIA Quadro P3000',
    '71 - AMD Radeon RX Vega Mobile',
    '69 - AMD Radeon RX 580 (Laptop)',
    '68 - AMD Radeon RX 580X (Laptop)',
    '67 - NVIDIA Quadro P3200',
    '66 - NVIDIA Quadro P4000 Max-Q',
    '65 - NVIDIA GeForce GTX 1060 (Laptop)',
    '64 - AMD Radeon RX 480 (Desktop)',
    '63 - NVIDIA GeForce GTX 1650 Ti (Desktop)',
    '62 - NVIDIA Quadro T2000 Max-Q',
    '61 - NVIDIA Quadro T2000 (Laptop)',
    '60 - NVIDIA Quadro P4000',
    '59 - AMD Radeon RX 570 (Desktop)',
    '58 - NVIDIA GeForce GTX 1060 (Desktop)',
    '56 - AMD Radeon R9 390X',
    '55 - NVIDIA Quadro M5500',
    '54 - NVIDIA GeForce GTX 980 (Laptop)',
    '53 - AMD Radeon RX 580 (Desktop)',
    '52 - AMD Radeon RX 590 (Desktop)',
    '51 - NVIDIA GeForce GTX 980',
    '50 - AMD Radeon R9 Nano',
    '49 - AMD Radeon R9 Fury',
    '47 - NVIDIA Quadro P5000 Max-Q',
    '46 - NVIDIA GeForce GTX 1660 Ti Max-Q',
    '45 - NVIDIA GeForce GTX 1070 Max-Q',
    '44 - NVIDIA GeForce GTX 980 Ti',
    '43 - NVIDIA GeForce GTX 1660 Ti (Laptop)',
    '42 - NVIDIA Quadro P5000',
    '41 - NVIDIA Quadro P4200',
    '40 - NVIDIA GeForce GTX 1660 Ti (Desktop)',
    '39 - NVIDIA GeForce GTX 1070 (Laptop)',
    '38 - NVIDIA GeForce RTX 2060 Max-Q',
    '37 - AMD Radeon Pro Vega 56',
    '36 - NVIDIA GeForce GTX 1080 Max-Q',
    '35 - NVIDIA GeForce GTX 1070 (Desktop)',
    '34 - NVIDIA Quadro P5200',
    '32 - NVIDIA GeForce RTX 2060 (Laptop)',
    '31 - AMD Radeon RX Vega 56',
    '30 - NVIDIA Quadro RTX 3000 Max-Q',
    '29 - NVIDIA Quadro RTX 3000 (Laptop)',
    '28 - NVIDIA GeForce RTX 2070 Max-Q',
    '27 - NVIDIA GeForce GTX 1070 Ti (Desktop)',
    '26 - NVIDIA GeForce RTX 2060 (Desktop)',
    '25 - NVIDIA Quadro RTX 4000 Max-Q',
    '24 - NVIDIA Quadro RTX 4000 (Laptop)',
    '23 - NVIDIA GeForce GTX 1080 (Laptop)',
    '22 - AMD Radeon RX Vega 64',
    '21 - AMD Radeon RX 5700 (Desktop)',
    '20 - NVIDIA GeForce RTX 2060 Super',
    '19 - NVIDIA GeForce RTX 2070 (Laptop)',
    '18 - NVIDIA GeForce GTX 1080 (Desktop)',
    '17 - NVIDIA GeForce RTX 2070 (Desktop)',
    '16 - AMD Radeon RX 5700 XT (Desktop)',
    '15 - AMD Radeon VII',
    '14 - NVIDIA GeForce RTX 2070 Super',
    '13 - NVIDIA GeForce RTX 2080 Max-Q',
    '12 - NVIDIA GeForce GTX 1070 SLI (Laptop)',
    '11 - NVIDIA GeForce GTX 1070 SLI (Desktop)',
    '10 - NVIDIA GeForce GTX 1080 SLI (Laptop)',
    '9 - NVIDIA Titan X Pascal',
    '8 - NVIDIA GeForce GTX 1080 Ti (Desktop)',
    '7 - NVIDIA GeForce RTX 2080 (Laptop)',
    '6 - NVIDIA Quadro RTX 5000 Max-Q',
    '5 - NVIDIA Quadro RTX 5000 (Laptop)',
    '4 - NVIDIA GeForce RTX 2080 (Desktop)',
    '3 - NVIDIA GeForce RTX 2080 Super',
    '2 - NVIDIA GeForce RTX 2080 Ti (Desktop)',
    '1 - NVIDIA Titan RTX',
];
const GPU_BENCHMARK_SCORE_MOBILE = [
    '915 - ARM Mali-200',
    '914 - Qualcomm Adreno 200',
    '913 - PowerVR SGX530',
    '912 - PowerVR SGX531',
    '911 - PowerVR SGX535',
    '910 - Vivante GC800',
    '909 - Qualcomm Adreno 203',
    '908 - Qualcomm Adreno 205',
    '906 - PowerVR SGX540',
    '904 - NVIDIA GeForce ULP (Tegra 2)',
    '903 - ARM Mali-400 MP',
    '902 - ARM Mali-400 MP2',
    '901 - Vivante GC1000+ Dual-Core',
    '900 - Qualcomm Adreno 220',
    '899 - Broadcom VideoCore-IV',
    '898 - NVIDIA GeForce ULP (Tegra 3)',
    '897 - ARM Mali-400 MP4',
    '896 - Vivante GC4000',
    '895 - Qualcomm Adreno 225',
    '887 - Qualcomm Adreno 302',
    '886 - Vivante GC7000UL',
    '885 - ARM Mali-T720',
    '884 - Qualcomm Adreno 304',
    '883 - Qualcomm Adreno 305',
    '882 - Qualcomm Adreno 306',
    '881 - Qualcomm Adreno 308',
    '880 - PowerVR SGX544',
    '879 - ARM Mali-T720 MP2',
    '878 - PowerVR SGX544MP2',
    '877 - PowerVR SGX545',
    '874 - PowerVR SGX543MP2',
    '864 - PowerVR SGX543MP3',
    '856 - ARM Mali-T830 MP1',
    '855 - ARM Mali-450 MP4',
    '854 - ARM Mali-T720 MP4',
    '853 - PowerVR GE8100',
    '852 - PowerVR GE8300',
    '851 - PowerVR GE8320',
    '850 - ARM Mali-T760 MP2',
    '849 - Qualcomm Adreno 320',
    '848 - ARM Mali-T624',
    '847 - PowerVR SGX543MP4',
    '820 - ARM Mali-T830 MP2',
    '819 - Qualcomm Adreno 405',
    '818 - PowerVR G6200',
    '817 - NVIDIA GeForce Tegra 4',
    '812 - ARM Mali-T604 MP4',
    '806 - ARM Mali-T830 MP3',
    '805 - ARM Mali-T860 MP2',
    '801 - Qualcomm Adreno 504',
    '800 - Qualcomm Adreno 505',
    '799 - PowerVR GE8322 / IMG8322',
    '798 - Qualcomm Adreno 506',
    '797 - Qualcomm Adreno 508',
    '796 - Qualcomm Adreno 509',
    '795 - ARM Mali-T628 MP4',
    '794 - PowerVR SGX554MP4',
    '756 - ARM Mali-T760 MP4',
    '755 - ARM Mali-T628 MP6',
    '754 - Intel HD Graphics (Bay Trail)',
    '753 - PowerVR G6400',
    '752 - PowerVR GX6250',
    '751 - PowerVR G6430',
    '750 - Qualcomm Adreno 330',
    '749 - Qualcomm Adreno 510',
    '748 - Qualcomm Adreno 512',
    '747 - Qualcomm Adreno 612',
    '684 - Intel HD Graphics (Cherry Trail)',
    '671 - ARM Mali-G51 MP4',
    '669 - Qualcomm Adreno 616',
    '668 - Qualcomm Adreno 618',
    '667 - Qualcomm Adreno 418',
    '647 - Qualcomm Adreno 420',
    '646 - PowerVR GX6450',
    '636 - ARM Mali-T880 MP2',
    '635 - ARM Mali-T760 MP6',
    '603 - ARM Mali-T880 MP4',
    '602 - ARM Mali-G72 MP3',
    '581 - Qualcomm Adreno 430',
    '578 - ARM Mali-G71 MP2',
    '577 - ARM Mali-T760 MP8',
    '531 - ARM Mali-T880 MP12',
    '530 - Apple A9 / PowerVR GT7600',
    '529 - NVIDIA Tegra K1 Kepler GPU',
    '528 - PowerVR GXA6850',
    '527 - Qualcomm Adreno 530',
    '488 - ARM Mali-G71 MP8',
    '487 - ARM Mali-G72 MP12',
    '486 - ARM Mali-G71 MP20',
    '485 - ARM Mali-G72 MP18',
    '484 - Qualcomm Adreno 540',
    '483 - ARM Mali-G76 MP10',
    '482 - ARM Mali-G76 MP12',
    '481 - Qualcomm Adreno 630',
    '480 - Qualcomm Adreno 640',
    '465 - Apple A10 Fusion GPU / PowerVR',
    '377 - NVIDIA Tegra X1 Maxwell GPU',
    '352 - Apple A9X / PowerVR Series 7XT',
    '316 - Apple A10X Fusion GPU / PowerVR',
    '315 - Apple A11 Bionic GPU',
    '314 - Apple A12 Bionic GPU',
    '284 - Apple A12X Bionic GPU',
];

const cleanEntryString = (entryString) => entryString
    .toLowerCase() // Lowercase all for easier matching
    .split('- ')[1] // Remove prelude score (`3 - `)
    .split(' /')[0]; // Reduce 'apple a9x / powervr series 7xt' to 'apple a9x'

const cleanRendererString = (rendererString) => {
    let cleanedRendererString = rendererString.toLowerCase();
    // Strip off ANGLE and Direct3D version
    if (cleanedRendererString.includes('angle (') && cleanedRendererString.includes('direct3d')) {
        cleanedRendererString = cleanedRendererString.replace('angle (', '').split(' direct3d')[0];
    }
    // Strip off the GB amount (1060 6gb was being concatenated to 10606 and because of it using the fallback)
    if (cleanedRendererString.includes('nvidia') && cleanedRendererString.includes('gb')) {
        cleanedRendererString = cleanedRendererString.split(/\dgb/)[0];
    }
    return cleanedRendererString;
};

// Get benchmark entry's by percentage of the total benchmark entries
const getBenchmarkByPercentage = (benchmark, percentages) => {
    let chunkOffset = 0;
    const benchmarkTiers = percentages.map(percentage => {
        const chunkSize = Math.round((benchmark.length / 100) * percentage);
        const chunk = benchmark.slice(chunkOffset, chunkOffset + chunkSize);
        chunkOffset += chunkSize;
        return chunk;
    });
    return benchmarkTiers;
};

var DetectUA = /** @class */ (function () {
    /**
     * Detect a users browser, browser version and wheter it is a mobile-, tablet- or desktop device.
     *
     * @param forceUserAgent Force a user agent string (useful for testing)
     */
    function DetectUA(forceUserAgent) {
        // Internal cache, prevents from doing the same computations twice
        this.cache = new Map();
        this.userAgent = forceUserAgent
            ? forceUserAgent
            : window && window.navigator
                ? window.navigator.userAgent
                : '';
        this.android = !/like android/i.test(this.userAgent) && /android/i.test(this.userAgent);
        this.iOS = this.match(1, /(iphone|ipod|ipad)/i).toLowerCase();
    }
    /**
     * Match entry based on position found in the user-agent string
     *
     * @param pattern regular expression pattern
     */
    DetectUA.prototype.match = function (position, pattern) {
        var match = this.userAgent.match(pattern);
        return (match && match.length > 1 && match[position]) || '';
    };
    Object.defineProperty(DetectUA.prototype, "isMobile", {
        /**
         * Returns if the device is a mobile device
         */
        get: function () {
            var cached = this.cache.get('isMobile');
            if (cached) {
                return cached;
            }
            else {
                if (
                // Default mobile
                !this.isTablet &&
                    (/[^-]mobi/i.test(this.userAgent) ||
                        // iPhone / iPod
                        (this.iOS === 'iphone' || this.iOS === 'ipod') ||
                        // Android
                        this.android ||
                        // Nexus mobile
                        /nexus\s*[0-6]\s*/i.test(this.userAgent))) {
                    this.cache.set('isMobile', true);
                    return true;
                }
                this.cache.set('isMobile', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isTablet", {
        /**
         * Returns if the device is a tablet device
         */
        get: function () {
            var cached = this.cache.get('isTablet');
            if (cached) {
                return cached;
            }
            else {
                if (
                // Default tablet
                (/tablet/i.test(this.userAgent) && !/tablet pc/i.test(this.userAgent)) ||
                    // iPad
                    this.iOS === 'ipad' ||
                    // Android
                    (this.android && !/[^-]mobi/i.test(this.userAgent)) ||
                    // Nexus tablet
                    (!/nexus\s*[0-6]\s*/i.test(this.userAgent) && /nexus\s*[0-9]+/i.test(this.userAgent))) {
                    this.cache.set('isTablet', true);
                    return true;
                }
                this.cache.set('isTablet', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isDesktop", {
        /**
         * Returns if the device is a desktop device
         */
        get: function () {
            var cached = this.cache.get('isDesktop');
            if (cached) {
                return cached;
            }
            else {
                var result = !this.isMobile && !this.isTablet;
                this.cache.set('isDesktop', result);
                return result;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isiOS", {
        /**
         * Returns if the device is an iOS device
         */
        get: function () {
            var cached = this.cache.get('isiOS');
            if (cached) {
                return cached;
            }
            else {
                if (this.iOS) {
                    return {
                        name: 'iOS',
                        version: this.match(1, /os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g, '.'),
                    };
                }
                else {
                    return false;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isAndroid", {
        /**
         * Returns if the device is an Android device
         */
        get: function () {
            var cached = this.cache.get('isAndroid');
            if (cached) {
                return cached;
            }
            else {
                if (this.android) {
                    return {
                        name: 'Android',
                        version: this.match(1, /android[ \/-](\d+(\.\d+)*)/i),
                    };
                }
                else {
                    return false;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "browser", {
        /**
         * Returns the browser name and version
         */
        get: function () {
            var cached = this.cache.get('browser');
            if (cached) {
                return cached;
            }
            else {
                var versionIdentifier = this.match(1, /version\/(\d+(\.\d+)?)/i);
                var result = void 0;
                if (/opera/i.test(this.userAgent)) {
                    // Opera
                    result = {
                        name: 'Opera',
                        version: versionIdentifier || this.match(1, /(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/opr\/|opios/i.test(this.userAgent)) {
                    // Opera
                    result = {
                        name: 'Opera',
                        version: this.match(1, /(?:opr|opios)[\s\/](\d+(\.\d+)?)/i) || versionIdentifier,
                    };
                }
                else if (/SamsungBrowser/i.test(this.userAgent)) {
                    // Samsung Browser
                    result = {
                        name: 'Samsung Internet for Android',
                        version: versionIdentifier || this.match(1, /(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/yabrowser/i.test(this.userAgent)) {
                    // Yandex Browser
                    result = {
                        name: 'Yandex Browser',
                        version: versionIdentifier || this.match(1, /(?:yabrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/ucbrowser/i.test(this.userAgent)) {
                    // UC Browser
                    result = {
                        name: 'UC Browser',
                        version: this.match(1, /(?:ucbrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/msie|trident/i.test(this.userAgent)) {
                    // Internet Explorer
                    result = {
                        name: 'Internet Explorer',
                        version: this.match(1, /(?:msie |rv:)(\d+(\.\d+)?)/i),
                    };
                }
                else if (/edg([ea]|ios)/i.test(this.userAgent)) {
                    // Edge
                    result = {
                        name: 'Microsoft Edge',
                        version: this.match(2, /edg([ea]|ios)\/(\d+(\.\d+)?)/i),
                    };
                }
                else if (/firefox|iceweasel|fxios/i.test(this.userAgent)) {
                    // Firefox
                    result = {
                        name: 'Firefox',
                        version: this.match(1, /(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/chromium/i.test(this.userAgent)) {
                    // Chromium
                    result = {
                        name: 'Chromium',
                        version: this.match(1, /(?:chromium)[\s\/](\d+(?:\.\d+)?)/i) || versionIdentifier,
                    };
                }
                else if (/chrome|crios|crmo/i.test(this.userAgent)) {
                    // Chrome
                    result = {
                        name: 'Chrome',
                        version: this.match(1, /(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i),
                    };
                }
                else if (/safari|applewebkit/i.test(this.userAgent)) {
                    // Safari
                    result = {
                        name: 'Safari',
                        version: versionIdentifier,
                    };
                }
                else {
                    // Everything else
                    result = {
                        name: this.match(1, /^(.*)\/(.*) /),
                        version: this.match(2, /^(.*)\/(.*) /),
                    };
                }
                this.cache.set('browser', result);
                return result;
            }
        },
        enumerable: true,
        configurable: true
    });
    return DetectUA;
}());

// Vendor
const device = new DetectUA();
const { browser, isMobile, isTablet, isDesktop } = device;

const getEntryVersionNumber = (entryString) => entryString.replace(/[\D]/g, ''); // Grab and concat all digits in the string

const getWebGLUnmaskedRenderer = (gl) => {
    const glExtensionDebugRendererInfo = gl.getExtension('WEBGL_debug_renderer_info');
    const renderer = glExtensionDebugRendererInfo &&
        gl.getParameter(glExtensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL);
    return renderer;
};

const isWebGLSupported = ({ browser }) => {
    const attributes = {
        alpha: false,
        antialias: false,
        depth: false,
        failIfMajorPerformanceCaveat: true,
        powerPreference: 'high-performance',
        stencil: false,
    };
    // Workaround for Safari 12
    // SEE: https://github.com/TimvanScherpenzeel/detect-gpu/issues/5
    if (typeof browser !== "boolean" && browser.name === 'Safari' && browser.version.includes('12')) {
        delete attributes.powerPreference;
    }
    // Keep reference to the canvas and context in order to clean up
    // after the necessary information has been extracted
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl', attributes) || canvas.getContext('experimental-webgl', attributes);
    if (!gl || !(gl instanceof WebGLRenderingContext)) {
        return;
    }
    return gl;
};

// Generated data
const getGPUTier = (options = {}) => {
    const mobileBenchmarkPercentages = options.mobileBenchmarkPercentages || [
        0,
        50,
        30,
        20,
    ];
    const desktopBenchmarkPercentages = options.desktopBenchmarkPercentages || [
        0,
        50,
        30,
        20,
    ];
    const forceRendererString = options.forceRendererString || '';
    const forceMobile = options.forceMobile || false;
    let renderer;
    let tier = '';
    let type = '';
    if (!forceRendererString) {
        const gl = options.glContext || isWebGLSupported({
            browser,
        });
        if (!gl) {
            if (isMobile || isTablet || forceMobile) {
                return {
                    tier: 'GPU_MOBILE_TIER_0',
                    type: 'WEBGL_UNSUPPORTED',
                };
            }
            return {
                tier: 'GPU_DESKTOP_TIER_0',
                type: 'WEBGL_UNSUPPORTED',
            };
        }
        renderer = getWebGLUnmaskedRenderer(gl);
    }
    else {
        renderer = forceRendererString;
    }
    renderer = cleanRendererString(renderer);
    const rendererVersionNumber = renderer.replace(/[\D]/g, '');
    // GPU BLACKLIST
    // https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers
    // https://www.khronos.org/webgl/wiki/BlacklistsAndWhitelists
    // https://chromium.googlesource.com/chromium/src/+/master/gpu/config/software_rendering_list.json
    // https://chromium.googlesource.com/chromium/src/+/master/gpu/config/gpu_driver_bug_list.json
    const isGPUBlacklisted = /(radeon hd 6970m|radeon hd 6770m|radeon hd 6490m|radeon hd 6630m|radeon hd 6750m|radeon hd 5750|radeon hd 5670|radeon hd 4850|radeon hd 4870|radeon hd 4670|geforce 9400m|geforce 320m|geforce 330m|geforce gt 130|geforce gt 120|geforce gtx 285|geforce 8600|geforce 9600m|geforce 9400m|geforce 8800 gs|geforce 8800 gt|quadro fx 5|quadro fx 4|radeon hd 2600|radeon hd 2400|radeon hd 2600|mali-4|mali-3|mali-2)/.test(renderer);
    if (isGPUBlacklisted) {
        if (isMobile || isTablet || forceMobile) {
            return {
                tier: 'GPU_MOBILE_TIER_0',
                type: 'BLACKLISTED',
            };
        }
        return {
            tier: 'GPU_DESKTOP_TIER_0',
            type: 'BLACKLISTED',
        };
    }
    if (isMobile || isTablet || forceMobile) {
        const mobileBenchmark = getBenchmarkByPercentage(GPU_BENCHMARK_SCORE_MOBILE, mobileBenchmarkPercentages);
        const isRendererAdreno = renderer.includes('adreno');
        const isRendererApple = renderer.includes('apple');
        const isRendererMali = renderer.includes('mali') && !renderer.includes('mali-t');
        const isRendererMaliT = renderer.includes('mali-t');
        const isRendererNVIDIA = renderer.includes('nvidia');
        const isRendererPowerVR = renderer.includes('powervr');
        mobileBenchmark.forEach((benchmarkTier, index) => benchmarkTier.forEach(benchmarkEntry => {
            const entry = cleanEntryString(benchmarkEntry);
            const entryVersionNumber = getEntryVersionNumber(entry);
            if ((entry.includes('adreno') && isRendererAdreno) ||
                (entry.includes('apple') && isRendererApple) ||
                (entry.includes('mali') && !entry.includes('mali-t') && isRendererMali) ||
                (entry.includes('mali-t') && isRendererMaliT) ||
                (entry.includes('nvidia') && isRendererNVIDIA) ||
                (entry.includes('powervr') && isRendererPowerVR)) {
                if (entryVersionNumber.includes(rendererVersionNumber)) {
                    tier = `GPU_MOBILE_TIER_${index}`;
                    type = `BENCHMARK - ${entry}`;
                }
                // Handle mobile edge cases
            }
        }));
        if (!tier) {
            tier = 'GPU_MOBILE_TIER_1';
            type = 'FALLBACK';
        }
        return {
            tier,
            type,
        };
    }
    if (isDesktop) {
        const desktopBenchmark = getBenchmarkByPercentage(GPU_BENCHMARK_SCORE_DESKTOP, desktopBenchmarkPercentages);
        const isRendererIntel = renderer.includes('intel');
        const isRendererAMD = renderer.includes('amd');
        const isRendererNVIDIA = renderer.includes('nvidia');
        desktopBenchmark.forEach((benchmarkTier, index) => benchmarkTier.forEach(benchmarkEntry => {
            const entry = cleanEntryString(benchmarkEntry);
            const entryVersionNumber = getEntryVersionNumber(entry);
            if ((entry.includes('intel') && isRendererIntel) ||
                (entry.includes('amd') && isRendererAMD) ||
                (entry.includes('nvidia') && isRendererNVIDIA)) {
                if (entryVersionNumber.includes(rendererVersionNumber)) {
                    tier = `GPU_DESKTOP_TIER_${index}`;
                    type = `BENCHMARK - ${entry}`;
                }
                // Handle desktop edge cases
            }
        }));
        if (!tier) {
            tier = 'GPU_DESKTOP_TIER_1';
            type = 'FALLBACK';
        }
        return {
            tier,
            type,
        };
    }
    return {
        tier,
        type,
    };
};

export { getGPUTier };
